
\chapter{Analisi}

Lo scopo di questo capitolo è quello di fornire un'analisi del sistema da proporre. Verrà specificato il contesto nel quale l'artefatto dovrà operare, mettendo in evidenzia l'insieme dei requisiti che dovranno risultare soddisfatti. Per la struttura di questo capitolo verranno utilizzate le specifiche suggerite in \cite{ieee830-1998} come riferimenti.

\section{Scopo del sistema}

Il progetto \emph{MyCLIPS} si prefigge lo scopo di sviluppare un software di tipo \emph{Expert System Environment}, mediante la realizzazione di un ambiente multi-paradigmatico che supporti programmazione procedurale e basata su regole, un regime di controllo di tipo \emph{forward chaining}, basato su un'implementazione dell'algoritmo RETE per le operazione di \emph{pattern-matching}.
Affiancato al sistema principale, verrà inoltre progettato un modulo aggiuntivo che consenta la distribuzione dei servizi offerti dal software principale tramite un'architettura basata sul modello \emph{client-server}.

L'artefatto derivante dall'implementazione del progetto, inteso come unione del software principale e del modulo server aggiuntivo, non sarà un prodotto con fini commerciali, ma piuttosto uno strumento con fini didattici e di supporto alla ricerca nell'ambito degli \emph{environment per sistemi esperti} e dell'integrazione degli stessi con tecnologie orientate al Web.


%%%%% ATTIVARE PER COMPILAZIONE RAPPORTO-TECNICO %%%%%
% Include:
% 	- Sezione: Definizioni, acronimi, abbreviazioni
%\include{Rapp-tecnico/glossario}


%%%%% ATTIVARE PER COMPILAZIONE RAPPORTO-TECNICO %%%%%
% Include:
% 	- Sezione: Riferimenti teorici
%		- RBS
%		- Unificazioni
%		- CRS
%		- CLIPS
%		- Architetture per sistemi distribuiti
%\include{Rapp-tecnico/riferimenti-teorici}

\section{Capacità}

Questa sezione offre una panoramica delle capacità richiesta al sistema, valutando le possibili alternative percorribili e giustificando eventuali vincoli introdotti in questa fase d'analisi.

Il tipo di software che il progetto MyCLIPS punta a realizzare è un \emph{environment} multi-paradigmatico per sistema esperti. In quanto tale deve offrire strumenti per la realizzazione di sistemi esperti, associando all'uso delle regole di produzione come metodo di rappresentazione della conoscenza, la possibilità di specifica di strutture di controllo tramite un paradigma procedurale.

\subsection{Linguaggio di specifica}\label{par:linguaggio}
Fra i vincoli di progettazione è prevista la necessità di fornire il sistema di un linguaggio di specifica che permetta l'utilizzo di sistemi esperti realizzati per il software CLIPS. Il livello di compatibilità previsto richiede di fornire all'utente i costrutti di base utilizzati da CLIPS per la definizione di regole, della conoscenza fattuale (in formato \emph{Ordered-Fact} e \emph{Template-Fact}), dei moduli, delle funzioni utente e delle variabili globali.

Il linguaggio utilizzato deve risultare compatibile sia a livello semantico che a livello sintattico con quello fornito da CLIPS, offrendo in questo modo il massimo livello di portabilità degli artefatti.

\subsubsection{Moduli}\label{par:linguaggio-moduli}
Il formalismo previsto da CLIPS e che dovrà essere supportato dal software prodotto, consente la definizione di moduli attraverso l'utilizzo del costrutto \emph{defmodule}.
Il modulo è un'unità di programma che racchiude e organizza la definizione di ulteriori costrutti. Lo scambio delle definizioni fra moduli differenti è previsto attraverso un protocollo di \emph{import/export}.

\begin{program}
\begin{verbatimtab}

(defmodule A
	(export ?ALL))

(defmodule B
	(import A ?ALL))
\end{verbatimtab}
\caption{Esempio d'uso di \emph{defmodule} per la specifica di moduli}
\end{program}

La sintassi richiede la definizione di un nome univoco per il modulo, inoltre prevede la possibilità di specificare un elenco di costrutti da rendere disponibili ad altri moduli (tramite l'attributo \emph{export}), oppure un elenco di definizioni da importare da un modulo precedentemente creato (tramite l'attributo \emph{import}).


\subsubsection{Funzioni utente}\label{par:linguaggio-funzioni}
All'utente, in maniera alternativa all'integrazione di funzioni scritte in linguaggio nativo, deve essere offerta la possibilità di aggiungere funzioni personalizzate all'interno del sistema utilizzando il costrutto \emph{deffunction}. La definizione di funzioni consente di specificare strutture di controllo procedurali che eseguano sequenze di operazioni guidate dai parametri di chiamata.

\begin{program}
\begin{verbatimtab}

(deffunction Funzione_Di_Prova (?arg1)
	(printout t ?arg1 crlf)
)
\end{verbatimtab}
\caption{Esempio d'uso di \emph{deffunction} per la specifica di funzioni}
\end{program}


Le funzioni cosi integrate potranno essere utilizzate nelle stesse modalità previste dalle altre funzioni di sistema, con l'eccezione relativa ai vincoli di visibilità fra moduli.

\begin{program}
\begin{verbatimtab}

(defmodule A
	(export deffunction Funzione_Di_Prova))
	
(deffunction A::Funzione_Di_Prova () )

(defmodule B
	(import A deffunction Funzione_Di_Prova))
\end{verbatimtab}
\caption{Esempio di esportazione della definizione di una funzione}
\end{program}

Le definizioni di funzioni devono essere esportate dal modulo in cui sono definite e successivamente importate da quello che, invece, intende utilizzarle.

\subsubsection{Regole}\label{par:linguaggio-regole}
La specifica di regole deve essere resa disponibile tramite l'utilizzo del costrutto \emph{defrule}.

\begin{program}
\begin{verbatimtab}

(defrule Make_Bird_Fly
	(bird (type ?X))
	=>
	(assert (bird (type ?X)	(fly yes)))
)
\end{verbatimtab}
\caption{Esempio d'uso di \emph{defrule} per la specifica di una regola}\label{code:defrule}
\end{program}

La porzione \emph{LHS} e \emph{RHS} della regola sono separati dal simbolo $=>$ (Codice~\ref{code:defrule}). I \emph{pattern} della \emph{LHS} sono definiti con riferimento ai formalismi utilizzati per la specifica di \emph{Ordered-Fact} e \emph{Template-Fact}. Le variabili vengono specificate attraverso l'uso di \emph{wildcard}, identificate dalla presenza del simbolo ''?'' come primo carattere. I \emph{pattern} possono essere ulteriormente specificati tramite l'utilizzo di connettivi logici come \emph{not}, \emph{or} e \emph{and}, oppure espressioni logiche come \emph{exists} o \emph{test}.

La porzione \emph{RHS} contiene chiamate a procedure di sistema o definite dall'utente tramite il costrutto \emph{deffunction}.


\subsubsection{Fatti}\label{par:linguaggio-fatti}
I \emph{fatti} costituiscono il contenuto della \emph{working memory}. Il linguaggio fornito deve prevedere, parallelamente a quanto previsto da CLIPS, la definizione dei fatti attraverso la notazione \emph{Ordered-Fact} e \emph{Template-Fact}. La specifica dei fatti deve essere riunita all'interno di costrutti \emph{deffacts}~(Codice~\ref{code:deffacts}). Questo consente di inserire un elenco di definizioni che verranno automaticamente asserite durante la fase di inizializzazione del sistema esperto.

\begin{program}
\begin{verbatimtab}

(deffacts Fatti_Iniziali
	(A B C)
	(bird (type penguin))
	(bird (type eagle))
	(combattente
		(mano-sx pugnale)
		(mano-dx tomahawk)
		(cintura scalpo scalpo scalpo))
)
\end{verbatimtab}
\caption{Definizione di un gruppo di fatti tramite \emph{deffacts}}\label{code:deffacts}
\end{program}

Il primo formato di specifica dei fatti, chiamato \emph{Ordered-Fact}, prevede la definizione degli stessi come vettori di elementi simbolici o numerici di lunghezza definita. Il formato del primo elemento è richiesto che sia di tipo \emph{SYMBOL}\footnote{SYMBOL rappresenta un tipo elementare presente in CLIPS. Appartengono a questo tipo tutte le sequenze alfanumeriche non delimitate da apici e che abbiano come primo elemento un carattere alfabetico}, il formato dei successivi elementi è arbitrario.

\begin{program}
\begin{verbatimtab}

(A B C)
\end{verbatimtab}
\caption{Fatto definito utilizzando la notazione \emph{Ordered-Fact}}\label{code:ordered-fact}
\end{program}


\begin{program}
\begin{verbatimtab}

(combattente
	(mano-sx scudo)
	(mano-dx spada)
	(cintura carne-secca borraccia monete))
\end{verbatimtab}
\caption[Fatto definito utilizzando la notazione \emph{Template-Fact}]{Fatto definito utilizzando la notazione \emph{Template-Fact}. Il nome del template a cui il fatto fa riferimento è \emph{combattente}. La specifica del \emph{template} prevede l'esistenza degli slot ''mano-sx'', ''mano-dx'' e ''cintura''}\label{code:template-fact}
\end{program}

La seconda modalità di specifica, denominata \emph{Template-Fact}, prevede la definizione dei fatti tramite l'utilizzo di un \emph{template} e una sequenza di \emph{slot}. Gli slot rappresentano delle caratteristiche definite nella specifica del \emph{template}.
La definizione del fatto può prevedere l'avvaloramento di tutti o solo una porzione degli \emph{slot} previsti dal \emph{template}.
I valori inseribili negli \emph{slot} possono essere singoli elementi o multipli. Nel secondo caso si farà riferimento allo \emph{slot} con il nome di \emph{multi-slot}~(Codice~\ref{code:template-fact}).

\subsubsection{Template}\label{par:linguaggio-template}
La specifica dei fatti in formato \emph{Template-Fact} prevede la definizione preventiva di un \emph{template} che definisca una ''tipologia'' di fatti, indicandoli con un nome univoco, e una sequenza di caratteristiche: \emph{slot} e \emph{multi-slot}~(Codice~\ref{code:deftemplate}).

\begin{program}
\begin{verbatimtab}

(deftemplate combattente "rappresenta un combattente"
	(slot mano-sx 
		(type SYMBOL))
	(slot mano-dx
		(default spada)
		(type SYMBOL))
	(multislot cintura))
\end{verbatimtab}
\caption{Specifica di \emph{Template} tramite \emph{deftemplate}. L'esempio mostra una possibile definizione di template valida per l'esempio in Codice~\ref{code:template-fact}}\label{code:deftemplate}
\end{program}

La specifica prevede la definizione di valori di \emph{default}, da attribuire nei casi in cui non venga fornito un valore durante l'asserzione, oppure di restrizioni sul tipo di valori utilizzabili nello \emph{slot}.


\subsection{Motore inferenziale}



\subsection{Terminale}

\subsection{Modulo Server}

\subsection{Riepilogo}

Si riassumono quindi le funzionalità richieste al sistema.

\begin{enumerate}
	\item l'uso di un linguaggio di specifica che consenta:
		\begin{enumerate}
			\item la definizione di regole di produzione (\ref{par:linguaggio-regole})
			\item l'utilizzo di un paradigma procedurale (\ref{par:linguaggio-funzioni})
			\item la specifica di funzioni utente (\ref{par:linguaggio-funzioni})
			\item la specifica di moduli (\ref{par:linguaggio-moduli})
			\item definizione di template di fatti (\ref{par:linguaggio-template})
			\item la specifica della conoscenza fattuale tramite:
				\begin{enumerate}
					\item fatti in notazione Ordered-Fact (\ref{par:linguaggio-fatti})
					\item fatti in notazione Template-Fact (\ref{par:linguaggio-fatti})
				\end{enumerate}
		\end{enumerate}
	\item la possibilità di aggiungere strategie di risoluzione dei conflitti (\ref{par:strategies})
	\item la possibilità di integrare nuove funzioni di sistema (\ref{par:clips})
	\item compatibilità con i sistemi sviluppati per CLIPS (\ref{par:clips})
	\item l'utilizzo dell'algoritmo RETE per le operazioni di \emph{Pattern-Matching}~(\ref{par:pattern-matching})
	\item la possibilità di accedere alle funzionalità del sistema tramite una \emph{shell}~(\ref{par:clips})
	\item la possibilità di accedere alle funzionalità del sistema tramite protocollo XML-RPC~(\ref{par:xmlrpc})
\end{enumerate}


\section{Vincoli di sistema}
\vincoliinit
\subsection{Vincoli di interfaccia}

\'E prevista l'interazione fra utente e sistema attraverso l'utilizzo di una \emph{Shell} di comandi per permettere la specifica e l'esecuzione dei sistema esperto.  A soddisfacimento della capacità richiesta 7, è previsto l'utilizzo del sistema tramite protocollo XML-RPC che consenta agli utenti di integrare le funzionalità del sistema in applicazioni di terze parti. In base a queste premesse si esplicitano i seguenti vincoli d'interfaccia.
\vincolistart
	\item Hardware\\	
	L'utente si interfaccia al sistema inserendo appositi comandi tramite tastiera. Inoltre acquisisce i risultati dell'elaborazione dei comandi attraverso il monitor. La tastiera viene inoltre utilizzata per l'inserimento di dati, qualora necessario.
	
	\item Utente\\
	L'interazione con il sistema avviene attraverso un'interfaccia testuale composta da una linea di comando, nella quale l'utente esplicita i comandi e attende i risultati dell'elaborazione. Anche i risultati vengono presentati nella medesima interfaccia testuale.
	
	\item Software\\
	L'utilizzo del sistema attraverso l'integrazione in applicazioni di terze parti (tramite integrazione diretta o interfaccia XML-RPC) prevede l'utilizzo di applicazioni per la scrittura di software o ambienti di sviluppo integrati (IDE).
	
	\item Software\\
	Il sistema prevede la possibilità di utilizzare applicazioni di \emph{text-editing} per la creazione dei sistemi esperti.
	
\vincoliend

\subsection{Vincoli operativi}

\vincolistart
	\item Hardware\\
	Per l'utilizzo in modalità servizio XML-RPC:
	\begin{itemize}
		\item 1GB di memoria RAM;
		\item Interfaccia di rete.
	\end{itemize}
	\item Software\\
	\'E previsto l'utilizzo del sistema su piattaforma PC con sistemi operativi
	\begin{itemize}
		\item Microsoft Windows XP, Vista, 7
		\item Ubuntu 12.04
	\end{itemize}
\vincoliend

\subsection{Vincoli prestazionali}
\vincolistart
	\item le prestazioni complessive del sistema devono permettere il completamento dei test di una \emph{benchmark-suite} in tempo ragionevole.
\vincoliend
\subsection{Vincoli di progetto}
\vincolistart
	\item il sistema deve permettere l'esecuzione di artefatti realizzati tramite CLIPS (escludendo quelli che utilizzano le estensioni del linguaggio COOL), richiedendo soltanto modifiche di lieve entità.
	
	\item il sistema deve prevedere la possibilità di integrare nuove funzionalità
\vincoliend

\subsection{Stabilità dei vincoli}

\begin{longtable}{|c|c|c|p{7cm}|}
\caption{Matrice di stabilità dei vincoli}\label{tab:stabilita-vincoli}\\
\hline\hline
\rowcolor{grigio-chiarissimo} \textbf{\#} & \textbf{Stabile} & \textbf{Instabile} & \textbf{Motivazione} \\
\hline\hline
\endfirsthead
\hline\hline
\rowcolor{grigio-chiarissimo} \textbf{\#} & \textbf{Stabile} & \textbf{Instabile} & \textbf{Motivazione} \\
\hline\hline
\endhead

Vincolo-1 &  & $\blacklozenge$ & Nuove tecnologie potrebbero far migrare il sistema verso nuove forme di interazione \\ 
\hline 
Vincolo-2 & $\blacklozenge$ &  &  \\ 
\hline 
Vincolo-3 & $\blacklozenge$ & & \\ 
\hline 
Vincolo-4 & $\blacklozenge$ & & \\ 
\hline 
Vincolo-5 &  & $\blacklozenge$ & Lo sviluppo tecnologico potrebbe portare a richieste hardware differenti come conseguenza di un ampliamento delle richieste software \\ 
\hline 
Vincolo-6 & $\blacklozenge$ & & \\ 
\hline 
Vincolo-7 & & $\blacklozenge$ & Lo sviluppo del sistema potrebbe portare all'introduzione di vincoli prestazionali \\ 
\hline 
Vincolo-8 & & $\blacklozenge$ & Lo sviluppo del sistema potrebbe portare all'ampliamento della compatibilità o a modifiche del linguaggio che riducano la portabilità degli artefatti\\ 
\hline 
Vincolo-9 & $\blacklozenge$ & & \\ 
\hline

\end{longtable}


\section{Attori e Casi d'uso}

\subsection{Attori}

In seguito ad un'analisi preliminare, sono state individuate sette classi di attori principali (\figurename~\ref{fig:attori}).

\begin{figure}[h]
\centering
\includegraphics[width=0.9\textwidth]{Immagini/Capitolo2/UseCases/Attori.png}
\caption{Gerarchia degli attori}\label{fig:attori}
\end{figure}

\begin{description}
	\item[ES Consumer:] rappresenta un attore generalizzato in grado di utilizzare i servizi principali offerti dall'\emph{environment} per caricare, eseguire ed interagire con un artefatto precedentemente creato tramite i protocolli offerti dall'\emph{environment} stesso.
	
	\item[ES Developer:] specializzazione di \emph{ES Consumer}, servendosi del linguaggio di specifica fornito dall'\emph{environment} realizza artefatti eseguibili. Tramite l'utilizzo di apposite interfacce è anche in grado di testare l'artefatto prodotto analizzando rappresentazioni grafiche delle strutture interpretate e registri d'attività dell'esecuzione dell'artefatto.
	\item[Utente Umano:] specializzazione di \emph{ES Consumer}.
	
	\item[Standalone Application:] specializzazione di \emph{ES Consumer}. Utilizza i servizi offerti dall'\emph{environment} all'interno di applicazioni \emph{stand-alone}. Esegue artefatti e valuta i risultati dell'esecuzione analizzando eventi e lo stato finale del sistema.
	
	\item[Remote Application:] specializzazione di \emph{Standalone Application}. Esegue attività analoghe a quelle di \emph{Standalone Application}, ma utilizzando i servizi tramite appositi protocolli di comunicazione. Per supportare questi protocolli l'attore può creare, configurare o distruggere sessioni.
	
	\item[Environment Developer:] utilizzando la documentazione di sistema e le apposite \emph{API} fornite, estende le funzionalità dell'\emph{environment} aggiungendo nuove funzioni di sistema, strategie di risoluzione dei conflitti o \emph{event-listener}. Utilizzando un framework per l'esecuzione di test d'unità, può verificare il funzionamento delle funzioni integrate.
	
	\item[Server Administrator:] configura e gestisce un'istanza server dell'\emph{environment}.
	
\end{description}

\subsection{Organizzazione dei Casi d'uso}

\begin{figure}
\centering
\includegraphics[width=1.2\textwidth, angle=270]{Immagini/Capitolo2/UseCases/Vista-generale.png}
\caption{Vista generale dei casi d'uso principali}\label{fig:uc-vista-generale}
\end{figure}


I casi d'uso vengono organizzati in quattro gruppi differenti (\figurename~\ref{fig:uc-vista-generale}). Il gruppo di appartenenza di ognuno, indicato dal prefisso inserito nel nome, viene associato tenendo conto dell'attore principale al quale \emph{use case} fa riferimento. Il formato del nome di ogni caso d'uso seguirà quindi questa convenzione:
\begin{center}
UC[\emph{Attore}]-[\emph{Sezione}].[\emph{Gruppo}].[\emph{SottoGruppo}]: [\emph{Descrizione breve}]
\end{center}
dove:


\begin{description}
	\item[Attore] indica l'attore principale relazionato con il caso d'uso: \textbf{E} per \emph{Environment Developer}, \textbf{A} per \emph{Server Administrator}, \textbf{S} per \emph{Standalone Application}, \textbf{R} per \emph{Remote Application}, \textbf{D} per \emph{ES Developer} e \textbf{C} per \emph{ES Consumer}. Non è presente nessuno codice per l'attore \emph{Utente umano} in quanto non esiste alcun caso d'uso relativo esclusivamente ad esso.

	\item[Sezione] indica una delle sezioni principali presenti nella vista generale fornita in \figurename~\ref{fig:uc-vista-generale}.
	
	\item[Gruppo] e \textbf{SottoGruppo} esplicitano un'organizzazione gerarchica dei casi d'uso.

\end{description}

\pagebreak

\subsubsection{UCC-1: Utilizzo artefatto}

\input{Capitoli/capitolo-2/ucc-1}\pagebreak

\subsubsection{UCD-1: Creazione artefatto}

\input{Capitoli/capitolo-2/ucd-1}\pagebreak

\subsubsection{UCD-2: Testa artefatto}

\input{Capitoli/capitolo-2/ucd-2}\pagebreak

\subsubsection{UCE-1: Modifica funzioni di sistema}

\input{Capitoli/capitolo-2/uce-1}\pagebreak

\subsubsection{UCE-2: Monitorizza evento}

\input{Capitoli/capitolo-2/uce-2}\pagebreak

\subsubsection{UCE-3: Aggiunge CRS}

\input{Capitoli/capitolo-2/uce-3}\pagebreak

\subsubsection{UCE-4: Testa environment}

\input{Capitoli/capitolo-2/uce-4}\pagebreak

\subsubsection{UCA-1: Avvia Server}

\input{Capitoli/capitolo-2/uca-1}\pagebreak

\subsubsection{UCA-2: Arresta Server}

\input{Capitoli/capitolo-2/uca-2}\pagebreak

\subsubsection{UCA-3: Configura Server}

\input{Capitoli/capitolo-2/uca-3}\pagebreak

\subsubsection{UCS-1: Analisi dei risultati}

\input{Capitoli/capitolo-2/ucs-1}\pagebreak

\subsubsection{UCR-1: Inizializza sessione}

\input{Capitoli/capitolo-2/ucr-1}\pagebreak

\subsubsection{UCR-2: Distrugge sessione}

\input{Capitoli/capitolo-2/ucr-2}\pagebreak

\subsubsection{UCR-3: Richiede servizio}

\input{Capitoli/capitolo-2/ucr-3}\pagebreak


%\section{Requisiti}

%\subsection{Generale}

